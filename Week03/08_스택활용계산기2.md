# 계산기 코드 만들기

## infix to postfix

- 입력: $+\,$ $\times\,$ $-\,$ $\div\,$ 숫자로 구성된 infix수식
- 출력:  postfix수식

- $2 + 3 \times 5$ &rightarrow; $2\,$ $3\,$ $5\,$ $\times\,$ $+$
    1. 피연산자의 순서는 그대로
    2. 연산자의 순서는 스택에 넣고 연산순서가 높은순으로 먼저 빠져나간다

<br>
리스트 : outstack
스택 : opstack

```python
for each token in expression:
    if token == operand:
        outstack.append(token)
    if token == '(':
        opstack.push(token)
    if token == ')':
        opstack에 저장된 연산자를 '('를 pop할때까지 계속 pop한다 --> outstack에 append
    if token in '+*-/':
        opstack에 token보다 우선순위 높은 연산자 모두 pop한 다음 자신을 push
opstack에 남은 연산자 모두 pop --> outstack에
```
<br>

### $6 + (3 - 2) \times 4$
- outstack (리스트)에는 postfix로 토큰들이 들어간다
- opstack (스택) 연산자가 들어갔다 나온다, 들어갈때 자신보다 우선순위 높은 연산자는 뺀다

#### 1단계 토큰별 변환 과정
1. $6$ &rightarrow; 피연산자 &rightarrow; 출력  
    - 출력: $6$  
    - 스택: 
2. $+$ &rightarrow; 연산자 &rightarrow; push  
    - 출력: $6$  
    - 스택: $+$
3. $($ &rightarrow; push  
    - 출력: $6$  
    - 스택: $+\,($  
4. $3$ &rightarrow; 피연산자 &rightarrow;  출력  
    - 출력: $6\,\, 3$  
    - 스택: $+\,($  
5. $-$ &rightarrow; 연산자 &rightarrow; push  
    - 출력: $6\,\, 3$  
    - 스택: $+\,(\,-$  
6. $2$ &rightarrow; 피연산자 &rightarrow; 출력  
    - 출력: $6\,\, 3\,\, 2$  
    - 스택: $+\,(\,-$  
7. $)$ &rightarrow; 괄호 처리 &rightarrow; $($ 까지 출력  
    - 출력: $-$ pop &rightarrow; 출력: $6\,\, 3\,\, 2\,\, -$  
    - 스택: $+$  
8. $\times$ &rightarrow; 연산자 &rightarrow; push  
    - $($스택 top $+$보다 우선순위 높음 &rightarrow; 그냥 push
    - 출력: $6\,\, 3\,\, 2\,\, -$  
    - 스택: $+\,\times$  
9. $4$ &rightarrow; 피연산자 &rightarrow; 출력  
    - 출력: $6\,\, 3\,\, 2\,\, -\,\, 4$
    - 스택: $+\,\,*$  

#### 2단계: 스택 비우기
1. 스택 pop &rightarrow; 출력
    - $6\,\, 3\,\, 2\,\, -\,\, 4\,\, \times$  
2. 스택 top: $+$ &rightarrow; 출력  
    - $6\,\, 3\,\, 2\,\, -\,\, 4\,\, \times\,+$  

> 최종 : $6\,\, 3\,\, 2\,\, -\,\, 4\,\, \times\,+$ 

#### 3단계: 실제 계산 순서
- 읽기: $6$ &rightarrow; push &rightarrow; [$6$]
- 읽기: $3$ &rightarrow; push &rightarrow; [$6, \, 3$]  
- 읽기: $2$ &rightarrow; push &rightarrow; [$6, \, 3, \, 2$]
- 읽기: $-$ &rightarrow; pop $2, \, 3$ &rightarrow; $(3-2=1)$ &rightarrow; push &rightarrow; [$6, \, 1$]  
- 읽기: $4$ &rightarrow; push &rightarrow; [$6, \, 1, \, 4$]  
- 읽기: $*$ &rightarrow; pop $4, \, 1$ &rightarrow; $(1\times4=4)$ &rightarrow; [$6, \, 4$]  
- 읽기: $+$ &rightarrow; pop $4, \, 6$ &rightarrow; $(6+4=10)$ &rightarrow; push &rightarrow; $[10]$  
> 최종 : $10$ 